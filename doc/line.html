<!DOCTYPE html>
<html style="">
<head>
  <meta charset="UTF-8">
  <title>LINE</title>
  <link rel="shortcut icon" type="image/png" href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAN1wAADdcBQiibeAAAAAd0SU1FB94FAQ80AVPNu7YAAAIPSURBVDjL1ZM9aFNhFIbfc7+/2+Qm6fUnbYpIWogi1Qo6FBwUshhwFBwdG3B0im4uLh2cg5MgjhahIK5S7VJQbNUhrUWDiW2aNP/33tyfz0GqFDo46pnO9L485+EA//3QwTJ///EEi+RNQF8HcB6ABUCAoKHRJqAeQb8igy29fXh741DAlXtP7kLrB+OWaV29kMXQ9bHb7uPD9g5yU8dxbS6LVs/B8zefACAC8Ex7sYXVR7ccNrtQPm2OsZcApDsKUKk14QUBZiaPQUmO6Ukbm7UW1irf4fnhQekcM6Otb6+X3hvd6qZw+oOPADQAZNM2bsyfheAMW7UWVj9XETMF8hdncPnMFIgAJvh2JpdLAgAHgGa1PhsbT3YSdvLHl3ozWV5uZQ4YPT/AysZXENE+k2InlU5byfSJaSmV/zsAAHzHS/WiTkooBWFKCFOBSwkuJaRSEGPKFkrZQknQn9vD8IToH6VH61+4RAQQHeFPdwHAuHNJsrRlLBL08K/Ea0QicF6ca7xbAQCWz+ezp8ZG7Yxy18MgCBiF3DBIGASDDEaCoojrwJHhoBEbNtbsZuXpxO76Mty+WygUXB5FUTUeN0E08hNytOv7vZOeV7fDQWjpvuZEFHBuDIQQ+0KYDdMUO1KpulKqWiqVOofgyuVybG/PSfi+Ewe0GYYBY4yHSpHLGBumUqlusVgc/lvP9BNYu8h7Iyl+nAAAAABJRU5ErkJggg==">
  <style type="text/css">
    html {
        width:100%;
        height:100%;
        font-family: sans-serif;
        font-size: 10pt;
    }
    div#toc {
        zdisplay: inline-block;
        padding: 1rem 0 0 0;
        font-weight: bold;
    }
    div#toc > ul {
        list-style-type: none;
        padding-left: 0;
        margin-top: 0.5rem;
        margin-bottom: 0.5rem;
    }
    div#toc ul ul {
        list-style-type: none;
        padding-left: 1rem;
        margin-left: 0;
    }
    div#toc li {
        margin-top: 0.1rem;
        margin-bottom: 0.1rem;
    }
    a, a:visited {
        color: #249;
        text-decoration: none;
    }
    a:hover {
        text-decoration: underline;
    }
    a.clonehandle {
        color: #aaa;
        font-size: 1rem;
    }
    ul {
        list-style-type: disc;
    }
    li, li p {
      margin-top: 0.25rem;
      margin-bottom: 0.25rem;
    }
    h1, .h1 {
        font-weight: bold;
        font-size: 2.2rem;
        margin-top: 1rem;
        padding-top: 0.5rem;
        border-top: 1px solid #777;
        margin-bottom: 0;
        padding-bottom: 0;
    }
    h2, .h2 {
        font-weight: bold;
        font-size: 1.7rem;
        padding-top: 1rem;
        margin-top: 0;
        border-bottom: 1px solid #999;
        margin-bottom: 0.5rem;
        padding-bottom: 0;
    }
    h3, .h3 {
        font-weight: bold;
        font-size: 1.6rem;
        margin-top: 1rem;
        border-bottom: 1px dashed #999;
        margin-bottom: 0.5rem;
    }
    h4, .h4 {
        font-weight: bold;
        font-size: 1.4rem;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    h5, .h5 {
        font-weight: bold;
        font-size: 1.3rem;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    h6, .h6 {
        font-weight: bold;
        font-size: 1.2rem;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    .h7 {
        font-weight: bold;
        font-size: 1.2rem;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    .h8 {
        font-weight: bold;
        font-size: 1.2rem;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    .h9 {
        font-weight: bold;
        font-size: 1.2rem;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    .h10 {
        font-weight: bold;
        font-size: 1.2rem;
        margin-top: 1rem;
        margin-bottom: 0.5rem;
    }
    table, td, th {
        border: 1px solid black;
        border-collapse: collapse;
        text-align: left;
        padding: 0.35rem;
    }
    .vcenter {
        text-align: center;
    }
    .big {
        font-size: 1.3em;
    }
    div.section div.section div.section {
        margin-left: 2rem;
        padding-left: 0.2rem;
        border-left: 1px solid #eee;
    }
    pre {
        border: 1px solid #bbb;
        background-color: #dadada;
        color: #000;
        padding: 0.5rem;
        font-family: monospace;
        font-size: 1rem;
    }
  </style>
</head>
<body>
<div id="toc"></div>
<div class="section">
  <h1>LINE</h1>
  <p>LINE is a network emulator designed for realism, accuracy and powerful measurement capabilities. It is capable of emulating in real-time networks at the IP-level, while forwarding network traffic generated by real Linux network stacks.</p>
  <p>LINE is released under the <a href="http://www.gnu.org/licenses/old-licenses/gpl-2.0.html">GPLv2</a> license.</p>
  <p>Get LINE: <pre>git clone https://git.epfl.ch/repo/line.git</pre></p>
  <div class="section">
    <h2>Architecture</h2>
    <p>A typical LINE setup consists of three computers, each having a specific role.</p>
    <div class="section">
      <h3>Network emulator</h3>
      This machine performs the emulation of the routers in the network. It should be a system optimized for low latency.
      <div class="section">
        <h4>Hardware requirements</h4>
        <p>CPU: 64-bit quad-core with good single thread performance. Our current setup uses an Intel Xeon E3-1290 V2 (Ivy Bridge) CPU, but there might be other good options. We found this classification useful: <a href="http://www.cpubenchmark.net/singleThread.html">PassMark - CPU Mark Single Thread Performance</a>.</p>

        <p>Network: two network cards, one for WAN and another one dedicated for exchanging traffic with the traffic generator. The dedicated card should run at 10 Gbps (1 Gbps will work too, but will limit the amount of traffic that can be sent through the emulated network to < 1 Gbps). The traffic generator and the network emulator should be connected directly through a network cable (no switches/routers, to avoid background traffic and other effects).</p>
      </div>
      <div class="section">
        <h4>Software requirements</h4>
        <p>OS: Ubuntu 12.04.4 (LTS) 64-bit server.</p>
        <p>The machine should not be used for anything else, and should be connected to a secure network, since we are going to disable the firewall.</p>
      </div>
    </div>
    <div class="section">
      <h3>Traffic generator</h3>
      This machine generates the traffic that will be routed through the emulated network. It should be a system optimized for good network I/O performance.
      <div class="section">
        <h4>Hardware requirements</h4>
        <p>CPU: 64-bit quad-core or better with good overall performance. Our current setup uses an Intel Xeon E3-1290 V2 (Ivy Bridge) CPU, but a CPU with more cores or a multi-CPU setup might work well. This classification may be useful: <a href="http://www.cpubenchmark.net/high_end_cpus.html">PassMark - CPU Mark High End CPUs</a>.</p>

        <p>Network: two network cards, one for WAN and another one dedicated for exchanging traffic with the network emulator. The dedicated card should run at the same speed as the dedicated card of the network emulator.</p>
      </div>
      <div class="section">
        <h4>Software requirements</h4>
        <p>OS: Ubuntu 12.04.4 (LTS) 64-bit server.</p>
        <p>The machine should not be used for anything else, and should be connected to a secure network, since we are going to disable the firewall.</p>
      </div>
    </div>
    <div class="section">
      <h3>Control center</h3>
      This machine is used for configuring the experiments, and controlling remotely the router emulator and the traffic generator.
      <div class="section">
        <h4>Hardware requirements</h4>
        <p>CPU: 64-bit, with modest performance.</p>

        <p>Network: network connectivity is required in order to run experiments.</p>
      </div>
      <div class="section">
        <h4>Software requirements</h4>
        <p>OS: Ubuntu 12.04.4 (LTS) 64-bit desktop.</p>
      </div>
    </div>
  </div>
  <div class="section">
    <h2>System configuration</h2>
    <div class="section">
      <h3>Network emulator</h3>
      <p>These instructions assume that the system is running a clean Ubuntu 12.04.4 (LTS) 64-bit server installation. The instructions should be executed as root (run sudo su).</p>
      <div class="section">
        <h4>Configure password-less SSH authentication with keys for root</h4>
        <p>See <a href="https://help.ubuntu.com/community/SSH/OpenSSH/Keys">https://help.ubuntu.com/community/SSH/OpenSSH/Keys</a>.</p>
      </div>
      <div class="section">
        <h4>Disable hyperthreading from BIOS</h4>
        <p>Hyper-threading does not work well with our low-latency configuration, and is not particularly useful, so we disable it.</p>
      </div>
      <div class="section">
        <h4>Install GCC & friends:</h4>
        <pre>apt-get install build-essential</pre>
      </div>
      <div class="section">
        <h4>Set a static IP address on the dedicated interface (in our case, eth7):</h4>
        <pre># In /etc/network/interfaces:
auto eth7
iface eth7 inet static
    address 192.168.77.1
    netmask 255.255.255.0</pre>
      </div>
      <div class="section">
        <h4>Install some utilities:</h4>
        <pre>apt-get install wget mc lm-sensors ipmitool htop stress zip
apt-get install bc
apt-get install traceroute ethtool irqbalance strace tcpdump bwm-ng netcat pciutils</pre>
      </div>
      <div class="section">
        <h4>Compile and install iproute2 and ethtool for kernel 3.11:</h4>
        <pre>apt-get install iptables-dev libdb4.8-dev

wget https://www.kernel.org/pub/linux/utils/net/iproute2/iproute2-3.11.0.tar.xz
tar -xJf iproute2-3.11.0.tar.xz
cd iproute2-3.11.0
./configure --prefix=/usr
make -j7

make install
cd ..

wget https://www.kernel.org/pub/software/network/ethtool/ethtool-3.11.tar.xz
tar -xJf ethtool-3.11.tar.xz
cd ethtool-3.11
./configure --prefix=/usr
make -j7

make install
rm -f /sbin/ethttool
cp /usr/sbin/ethtool /sbin/ethttool
cd ..</pre>
      </div>
      <div class="section">
        <h4>Fix a strange IPMI problem (optional, in our case there were errors in dmesg)</h4>
        <pre>rm /etc/modprobe.d/ipmi.conf</pre>
      </div>
      <div class="section">
        <h4>Install GCC 4.7.3 (for C++11 atomic ops)</h4>
        <pre>apt-get install software-properties-common python-software-properties
add-apt-repository ppa:ubuntu-toolchain-r/test
apt-get update
apt-cache search "g\+\+"
apt-get install gcc-4.7 g++-4.7

ls -lh /usr/bin/g++
update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.6
update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.7 40 --slave /usr/bin/g++ g++ /usr/bin/g++-4.7
update-alternatives --config gcc
# Select 4.7, then check:
g++ --version</pre>
      </div>
      <div class="section">
        <h4>Compile and install Qt 4 (without GUI)</h4>
        <pre>apt-get install libssl-dev flex bison gperf libicu-dev libxslt-dev ruby libcups2-dev libglib2.0-dev

pushd .
cd /tmp
rm -rf qt-everywhere-opensource-src-4.8.5
wget http://master.qt-project.org/official_releases/qt/4.8/4.8.5/qt-everywhere-opensource-src-4.8.5.tar.gz
tar xzf qt-everywhere-opensource-src-4.8.5.tar.gz
cd qt-everywhere-opensource-src-4.8.5
./configure --prefix=/usr/local --opensource --confirm-license --graphicssystem=raster --release -no-gui -nomake examples -nomake demos
make -j4

make install
cd ..
popd</pre>
      </div>
      <div class="section">
        <h4>Install PF_RING dependencies</h4>
        <pre>apt-get install libnuma-dev flex bison</pre>
      </div>
      <div class="section">
        <h4>Install LINE dependencies</h4>
        <pre>apt-get install libunwind7-dev

wget https://gperftools.googlecode.com/files/gperftools-2.1.tar.gz
tar xzf gperftools-2.1.tar.gz
cd gperftools-2.1
./configure --prefix=/usr
make -j4

make install
cd ..

apt-get install libnl-dev libev-dev</pre>
      </div>
      <div class="section">
        <h4>Compile and install a custom kernel (configured with low-latency optimizations)</h4>
        <p>Run these commands as non-root:</p>
        <pre>sudo apt-get install ncurses-dev kernel-package
mkdir ~/src
cd ~/src
apt-get source linux-image-$(uname -r)
cd linux-...
make menuconfig</pre>
        <p>Edit the following options:
          <ul>
            <li>enable CONFIG_NO_HZ_FULL (General setup -> Timers subsystem -> Timer tick handling -> Full dynticks system (tickless));</li>
            <li>enable CONFIG_NO_HZ_FULL_ALL (General setup -> Timers subsystem -> Timer tick handling -> Full dynticks system on all CPUs by default);</li>
            <li>enable CONFIG_PREEMPT (Processor type and features -> Preemption model -> Preemptible kernel (Low-Latency Desktop));</li>
            <li>select your CPU model instead of generic x86_64 (Processor type and features -> Processor family -> Core 2/newer Xeon).</li>
          </ul>
        </p>
        <pre>export CONCURRENCY_LEVEL=4
time fakeroot make-kpkg --initrd --append-to-version=-line kernel-image kernel-headers
cd ..
sudo dpkg -i linux-image-* linux-headers-*</pre>
      </div>
      <div class="section">
        <h4>Disable the firewall and in-kernel connection tracking (needs to be done after every kernel update)</h4>
        <pre>service ufw stop
echo "manual" > /etc/init/ufw.override
echo "blacklist iptable_filter" >> /etc/modprobe.d/blacklist.conf
echo "blacklist ip_tables" >> /etc/modprobe.d/blacklist.conf
echo "blacklist x_tables" >> /etc/modprobe.d/blacklist.conf
for d in /lib/modules/* ; do mv $d/kernel/net/ipv4/netfilter $d/kernel/net/ipv4/netfilter-old || /bin/true ; done
reboot</pre>
      </div>
      <div class="section">
        <h4>Set a custom kernel command line</h4>
        <pre># In /etc/default/grub, add to GRUB_CMDLINE_LINUX_DEFAULT and GRUB_CMDLINE_LINUX:
isolcpus=1,2,3 nohz_full=1,2,3 rcu_nocbs=1,2,3 acpi=noirq nosoftlockup intel_idle.max_cstate=0 processor.max_cstate=1 idle=halt mce=ignore_ce memtest
</pre>
        <p>Update the bootloader:</p>
        <pre>update-grub</pre>
        <div class="section">
          <h5>Parameters explained:</h5>
          <ul>
            <li>isolcpus=1,2,3: isolates cores 1, 2 and 3 from the rest of the system (they will be dedicated for LINE, i.e. no other applications will be scheduled to run on these cores); core 0 will be kept for housekeeping;</li>
            <li>nohz_full=1,2,3: disables the local timer on cores 1, 2 and 3 (to reduce latency/jitter);</li>
            <li>rcu_nocbs=1,2,3: disables RCU callback execution on cores 1, 2 and 3 (to reduce latency/jitter);</li>
            <li>acpi=noirq: whether this is useful is highly dependent on your motherboard and/or BIOS. We used it because a large number of "Rescheduled interrupts" was listed in /proc/interrupts. YMMV. See <a href="https://help.ubuntu.com/community/ReschedulingInterrupts">ReschedulingInterrupts</a>;</li>
            <li>nosoftlockup: disables the kernel soft-lockup detector. Setting this is recommended in the low-latency configuration manual of our HP server (included in servers/HP Proliant Low Latency Guide.pdf);</li>
            <li>intel_idle.max_cstate=0 processor.max_cstate=1 idle=halt mce=ignore_ce: do not allow any core to go into a sleep state (reduces latency/jitter);</li>
            <li>memtest: runs a memory test at boot. Optional.</li>
          </ul>
        </div>
      </div>
      <div class="section">
        <h4>Disable irqbalance (LINE maps manually all IRQs except for the dedicated network card to CPU 0):</h4>
        <pre># Set ENABLED=0 in /etc/default/irqbalance</pre>
      </div>
      <div class="section">
        <h4>Reboot</h4>
        <pre>reboot</pre>
      </div>
    </div>
    <div class="section">
      <h3>Traffic generator</h3>
      <p>These instructions assume that the system is running a clean Ubuntu 12.04.4 (LTS) 64-bit server installation. The instructions should be executed as root (run sudo su).</p>
      <div class="section">
        <h4>Configure password-less SSH authentication with keys for root</h4>
        <p>See <a href="https://help.ubuntu.com/community/SSH/OpenSSH/Keys">https://help.ubuntu.com/community/SSH/OpenSSH/Keys</a>.</p>
      </div>
      <div class="section">
        <h4>Install GCC & friends:</h4>
        <pre>apt-get install build-essential</pre>
      </div>
      <div class="section">
        <h4>Set a static IP address on the dedicated interface (in our case, eth7):</h4>
        <pre># In /etc/network/interfaces:
auto eth7
iface eth7 inet static
    address 192.168.77.2
    netmask 255.255.255.0</pre>
      </div>
      <div class="section">
        <h4>Install some utilities:</h4>
        <pre>apt-get install wget mc lm-sensors ipmitool htop stress zip
apt-get install bc
apt-get install traceroute ethtool irqbalance strace tcpdump bwm-ng netcat pciutils</pre>
      </div>
      <div class="section">
        <h4>Compile and install iproute2 and ethtool for kernel 3.11:</h4>
        <pre>apt-get install iptables-dev libdb4.8-dev

wget https://www.kernel.org/pub/linux/utils/net/iproute2/iproute2-3.11.0.tar.xz
tar -xJf iproute2-3.11.0.tar.xz
cd iproute2-3.11.0
./configure --prefix=/usr
make -j7

make install
cd ..

wget https://www.kernel.org/pub/software/network/ethtool/ethtool-3.11.tar.xz
tar -xJf ethtool-3.11.tar.xz
cd ethtool-3.11
./configure --prefix=/usr
make -j7

make install
rm -f /sbin/ethttool
cp /usr/sbin/ethtool /sbin/ethttool
cd ..</pre>
      </div>
      <div class="section">
        <h4>Fix a strange IPMI problem (optional, in our case there were errors in dmesg)</h4>
        <pre>rm /etc/modprobe.d/ipmi.conf</pre>
      </div>
      <div class="section">
        <h4>Install GCC 4.7.3 (for C++11 atomic ops)</h4>
        <pre>apt-get install software-properties-common python-software-properties
add-apt-repository ppa:ubuntu-toolchain-r/test
apt-get update
apt-cache search "g\+\+"
apt-get install gcc-4.7 g++-4.7

ls -lh /usr/bin/g++
update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.6 60 --slave /usr/bin/g++ g++ /usr/bin/g++-4.6
update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.7 40 --slave /usr/bin/g++ g++ /usr/bin/g++-4.7
update-alternatives --config gcc
# Select 4.7, then check:
g++ --version</pre>
      </div>
      <div class="section">
        <h4>Compile and install Qt 4 (without GUI)</h4>
        <pre>apt-get install libssl-dev flex bison gperf libicu-dev libxslt-dev ruby libcups2-dev libglib2.0-dev

pushd .
cd /tmp
rm -rf qt-everywhere-opensource-src-4.8.5
wget http://master.qt-project.org/official_releases/qt/4.8/4.8.5/qt-everywhere-opensource-src-4.8.5.tar.gz
tar xzf qt-everywhere-opensource-src-4.8.5.tar.gz
cd qt-everywhere-opensource-src-4.8.5
./configure --prefix=/usr/local --opensource --confirm-license --graphicssystem=raster --release -no-gui -nomake examples -nomake demos
make -j4

make install
cd ..
popd</pre>
      </div>
      <div class="section">
        <h4>Install LINE dependencies</h4>
        <pre>apt-get install libunwind7-dev

wget https://gperftools.googlecode.com/files/gperftools-2.1.tar.gz
tar xzf gperftools-2.1.tar.gz
cd gperftools-2.1
./configure --prefix=/usr
make -j4

make install
cd ..

apt-get install libnl-dev libev-dev</pre>
      </div>
      <div class="section">
        <h4>Disable the firewall and in-kernel connection tracking (needs to be done after every kernel update)</h4>
        <pre>service ufw stop
echo "manual" > /etc/init/ufw.override
echo "blacklist iptable_filter" >> /etc/modprobe.d/blacklist.conf
echo "blacklist ip_tables" >> /etc/modprobe.d/blacklist.conf
echo "blacklist x_tables" >> /etc/modprobe.d/blacklist.conf
for d in /lib/modules/* ; do mv $d/kernel/net/ipv4/netfilter $d/kernel/net/ipv4/netfilter-old || /bin/true ; done
reboot</pre>
      </div>
      <div class="section">
        <h4>Reboot</h4>
        <pre>reboot</pre>
      </div>
    </div>
    <div class="section">
      <h3>Control center</h3>
      <p>This machine requires a graphical desktop and password-less SSH access as root to the network emulator machine and the traffic generator machine.</p>
      <div class="section">
        <h4>Install GCC & friends and git:</h4>
        <pre>apt-get install build-essential git</pre>
      </div>
      <div class="section">
        <h4>Install Qt4</h4>
        <pre>apt-get install libqt4-dev qt4-dev-tools</pre>
      </div>
      <div class="section">
        <h4>Download LINE</h4>
        <pre>git clone https://git.epfl.ch/repo/line.git
cd line</pre>
      </div>
      <div class="section">
        <h4>Configure LINE</h4>
        <pre>cp remote-config-template.sh remote-config.sh</pre>
        <p>Edit remote-config.sh and set the following variables:
          <ul>
            <li>REMOTE_HOST_ROUTER: The IP address of the network emulator;</li>
            <li>REMOTE_DEDICATED_IF_ROUTER: The name of the dedicated network interface on the network emulator (in our network configuration example from above, eth7);</li>
            <li>REMOTE_HOST_HOSTS: The IP address of the traffic generator;</li>
            <li>REMOTE_DEDICATED_IF_HOSTS: The name of the dedicated network interface on the traffic generator (in our network configuration example from above, eth7).</li>
          </ul>
        </p>
      </div>
      <div class="section">
        <h4>Compile line-gui (control center GUI)</h4>
        <pre>mkdir build-line-gui
cd build-line-gui
qmake ../line-gui/line-gui.pro -spec linux-g++-64 CONFIG+=debug CONFIG+=declarative_debug
make -j4
cd ..</pre>
      </div>
      <div class="section">
        <h4>Compile line-runner (control center backend)</h4>
        <pre>mkdir build-line-runner
cd build-line-runner
qmake ../line-runner/line-runner.pro -spec linux-g++-64 CONFIG+=debug CONFIG+=declarative_debug
make -j4
cd ..</pre>
      </div>
      <div class="section">
        <h4>Compile line-router (network emulator application)</h4>
        <pre>cd line-router
./make-remote.sh
cd ..</pre>
      </div>
      <div class="section">
        <h4>Compile line-traffic (traffic generator application)</h4>
        <pre>cd line-traffic
./make-remote.sh
cd ..</pre>
      </div>
      <div class="section">
        <h4>Start line-gui</h4>
        <pre>cd build-line-gui
./line-gui</pre>
      </div>
    </div>
  </div>
  <div class="section">
    <h2>Using LINE</h2>
    <div class="section">
      <h3>Running the first experiment</h3>
      Video: <a target="_blank" href="video.html#video=testing-the-setup.webm">testing-the-setup.webm</a>
    </div>
    <div class="section">
      <h3>Editing the topology</h3>
      Video: <a target="_blank" href="video.html#video=editing-the-topology.webm">editing-the-topology.webm</a>
    </div>
    <div class="section">
      <h3>Generating traffic</h3>
      Video: <a target="_blank" href="video.html#video=generating-traffic.webm">generating-traffic.webm</a>
    </div>
    <div class="section">
      <h3>Inspecting the experiment results</h3>
      Video: <a target="_blank" href="video.html#video=interpreting-the-results.webm">inspecting-the-results.webm</a>
    </div>
  </div>
  <div class="section">
    <h2>Credits</h2>
    <p>LINE uses the following third party libraries/components/applications:</p>
    <ul>
      <li><b>Qt 4</b><br/>
        A cross-platform application and UI framework using C++ or QML.<br/>
        <a href="http://qt.nokia.com">http://qt.nokia.com</a><br/>
        License: LGPLv2.1
      </li>

      <li><b>PF_RING</b><br/>
        A network socket that dramatically improves the packet capture speed.<br/>
        <a href="http://www.ntop.org/products/pf_ring">http://www.ntop.org/products/pf_ring</a><br/>
        License: GPLv2
      </li>

      <li><b>libev</b><br/>
        A full-featured and high-performance event loop that is loosely modelled after libevent.<br/>
        <a href="http://software.schmorp.de/pkg/libev.html">http://software.schmorp.de/pkg/libev.html</a><br/>
        License: BSD license
      </li>

      <li><b>The Internet Topology Zoo</b><br/>
        A project to collect data network topologies from around the world.<br/>
        <a href="http://www.topology-zoo.org">http://www.topology-zoo.org</a>
      </li>

      <li><b>BRITE - Boston university Representative Internet Topology gEnerator</b><br/>
        A network topology generator.<br/>
        <a href="http://www.cs.bu.edu/brite">http://www.cs.bu.edu/brite</a><br/>
        BRITE is not included nor directly used in LINE; however, LINE is able to import BRITE files.
      </li>

      <li><b>The Gephi Toolkit - offers nice graph layout algorithms</b><br/>
        <a href="http://gephi.org">http://gephi.org</a><br/>
        License: The majority of the Gephi Plateform code is available under the dual license CDDL 1.0 and GNU General Public License (GPL) v3.<br/>
        Gephi and the layout program are included separately from LINE in source and binary forms, and the binary can be executed automatically by LINE.
      </li>

      <li><b>OpenOrd Layout Gephi Plugin</b><br/>
        Force-Directed layout algorithm for real-world large-scale undirected graphs.<br/>
        <a href="http://gephi.org/plugins/openord-layout">http://gephi.org/plugins/openord-layout</a><br/>
        License: GPLv3<br/>
        Gephi and the layout program are included separately from LINE in source and binary forms, and the binary can be executed automatically by LINE.
      </li>

      <li><b>Plot labeling algorithm</b><br/>
        nicelabel.cpp, adapted from label.c by by Paul Heckbert from "Graphics Gems", Academic Press, 1990.<br/>
        License: public domain
      </li>

      <li><b>IP/TCP/UDP checksum code from the Linux kernel</b><br/>
        <a href="https://www.kernel.org">https://www.kernel.org</a><br/>
        License: GPLv2
      </li>

      <li><b>TCMalloc from Google's gperftools</b><br/>
        A fast malloc library with thread-caching.<br/>
        <a href="https://code.google.com/p/gperftools">https://code.google.com/p/gperftools</a><br/>
        License: New BSD License
      </li>

      <li><b>ProducerConsumerQueue from Facebook's Folly</b><br/>
        ProducerConsumerQueue is a one producer and one consumer queue without locks.<br/>
        <a href="https://github.com/facebook/folly/blob/master/folly/ProducerConsumerQueue.h">https://github.com/facebook/folly/blob/master/folly/ProducerConsumerQueue.h</a><br/>
        License: Apache License, Version 2.0
      </li>

      <li><b>ReaderWriterQueue</b><br/>
        <a href="https://github.com/cameron314/readerwriterqueue">https://github.com/cameron314/readerwriterqueue</a><br/>
        <a href="http://moodycamel.com/blog/2013/a-fast-lock-free-queue-for-c++">http://moodycamel.com/blog/2013/a-fast-lock-free-queue-for-c++</a><br/>
        License: Simplified BSD license
      </li>

      <li><b>single-producer-single-consumer-queue</b><br/>
        <a href="http://software.intel.com/en-us/articles/single-producer-single-consumer-queue">http://software.intel.com/en-us/articles/single-producer-single-consumer-queue</a><br/>
        <a href="http://www.1024cores.net/home/lock-free-algorithms/queues/unbounded-spsc-queue">http://www.1024cores.net/home/lock-free-algorithms/queues/unbounded-spsc-queue</a><br/>
        License: Simplified BSD license
      </li>

      <li><b>Dygraphs</b><br/>
        <a href="http://dygraphs.com">http://dygraphs.com</a><br/>
        License: MIT license
      </li>

      <li><b>Mootools</b><br/>
        <a href="http://mootools.net">http://mootools.net</a><br/>
        License: MIT license
      </li>

      <li><b>3rd party images</b><br/>
        <a href="http://www.openclipart.org/detail/17668/rgtaylor_csc_net_computer">http://www.openclipart.org/detail/17668/rgtaylor_csc_net_computer</a><br/>
        <a href="http://www.openclipart.org/detail/1918/router-by-juanjo">http://www.openclipart.org/detail/1918/router-by-juanjo</a><br/>
        <a href="http://www.openclipart.org/detail/5012/laptop-by-metalmarious">http://www.openclipart.org/detail/5012/laptop-by-metalmarious</a><br/>
        <a href="http://www.openclipart.org/detail/113191/ftline-line-arrow-end-by-anonymous">http://www.openclipart.org/detail/113191/ftline-line-arrow-end-by-anonymous</a><br/>
        <a href="http://www.openclipart.org/detail/143629/edit-pencil-icon-by-darth_schmoo">http://www.openclipart.org/detail/143629/edit-pencil-icon-by-darth_schmoo</a><br/>
        All images from openclipart.org are licensed under CC0 1.0 Universal (CC0 1.0) - Public Domain Dedication.<br/>
        <a href="http://gnome-look.org/content/show.php/nuoveXT+2?content=56625">http://gnome-look.org/content/show.php/nuoveXT+2?content=56625</a><br/>
        The icons from the nuoveXT.2.2 theme are licensed under LGPL.
      </li>
    </ul>
  </div>
</div>
<script>
// Replaces $todo etc with tickmarks
specialCharStuff = function() {
  var html = document.body.innerHTML;
  html = html.replace(new RegExp("\\$(tick|ok|done|yes)", "gi"), "<span style='color:#4c4'>&#x2714;</span>");
  html = html.replace(new RegExp("\\$(x|no|abort|aborted|fail)", "gi"), "<span style='color:#c44'>&#x2718;</span>");
  html = html.replace(new RegExp("\\$(!|warn|warning)", "gi"), "<span style='color:#f74'>&#x25B2;</span>");
  html = html.replace(new RegExp("\\$(todo)", "gi"), "<span style='color:#fd1'>&#x2B23;</span>");
  html = html.replace(new RegExp("\\$(git:)([0-9a-fA-F]*)", "gi"),
                      "<a href='https://git.epfl.ch/polyrepo/private/changes.go?repositoryId=4260&amp;commitId=$2'>$2</a>");
  document.body.innerHTML = html;
}();

// Creates the table of contents
tocStuff = function() {
  var toc = "<span style='font-size:1.5em;'>Table of contents</span><ul>";
  var toclevel = 1;
  var tocUid = 0;

  function tocIdFromText(text) {
      var maxLength = 30;
      text = text.replace(/\s+/g, '-').replace(/[^0-9a-zA-Z-]/g, '').toLowerCase();
      text = text.substring(0, maxLength);
      tocUid += 1;
      text += '-' + tocUid;
      return text;
  }

  function makeTableOfContentsCallback(node) {
      if (!node.tagName)
          return;
      var level = 0;
      if (node.tagName.toLowerCase() === "h1" || node.classList.contains("h1")) {
          level = 1;
      } else if (node.tagName.toLowerCase() === "h2" || node.classList.contains("h2")) {
          level = 2;
      } else if (node.tagName.toLowerCase() === "h3" || node.classList.contains("h3")) {
          level = 3;
      } else if (node.tagName.toLowerCase() === "h4" || node.classList.contains("h4")) {
          level = 4;
      } else if (node.tagName.toLowerCase() === "h5" || node.classList.contains("h5")) {
          level = 5;
      } else if (node.tagName.toLowerCase() === "h6" || node.classList.contains("h6")) {
          level = 6;
      } else if (node.classList.contains("h7")) {
          level = 7;
      } else if (node.classList.contains("h8")) {
          level = 8;
      } else if (node.classList.contains("h9")) {
          level = 9;
      } else if (node.classList.contains("h10")) {
          level = 10;
      }
      if (level > 0) {
          while (level > toclevel) {
              toc += "<ul>";
              toclevel += 1;
          }
          while (level < toclevel) {
              toc += "</ul>";
              toclevel -= 1;
          }
          var text = (typeof node.textContent) === 'string' ? node.textContent : node.innerText;
          var html = node.innerHTML;
          var linkId = tocIdFromText(text);
          toc += "<li><a href='#" + linkId + "'>" + html + "</a></li>";
          node.innerHTML += "<a name='" + linkId + "'></a>";
      }
  }

  function domWalk(node, callback) {
      callback(node);
      if (!node.childNodes)
          return;
      for (var i = 0; i < node.childNodes.length; i++) {
          domWalk(node.childNodes[i], callback);
      }
  }

  domWalk(document.body, makeTableOfContentsCallback);
  toc += "</ul>";

  function insertAfter(sibling, newNode) {
      sibling.parentNode.insertBefore(newNode, sibling.nextSibling);
  }

  function makeSectionCollapsable(node) {
      if (!node.tagName)
          return;
      var level = 0;
      if (node.tagName.toLowerCase() === "h1" || node.classList.contains("h1")) {
          level = 1;
      } else if (node.tagName.toLowerCase() === "h2" || node.classList.contains("h2")) {
          level = 2;
      } else if (node.tagName.toLowerCase() === "h3" || node.classList.contains("h3")) {
          level = 3;
      } else if (node.tagName.toLowerCase() === "h4" || node.classList.contains("h4")) {
          level = 4;
      } else if (node.tagName.toLowerCase() === "h5" || node.classList.contains("h5")) {
          level = 5;
      } else if (node.tagName.toLowerCase() === "h6" || node.classList.contains("h6")) {
          level = 6;
      } else if (node.classList.contains("h7")) {
          level = 7;
      } else if (node.classList.contains("h8")) {
          level = 8;
      } else if (node.classList.contains("h9")) {
          level = 9;
      } else if (node.classList.contains("h10")) {
          level = 10;
      }
      if (level > 0) {
          var parent = node.parentNode;
          if (parent &&
              parent.parentNode &&
              parent.classList.contains("section") &&
              !node.classList.contains("clone")) {
              var dupSection = document.createElement('div');
              dupSection.classList.add('section');
              dupSection.classList.add('clone');
              var dupNode = node.cloneNode(true);
              dupNode.classList.add('clone');
              insertAfter(parent, dupSection);
              dupSection.appendChild(dupNode);

              dupSection.style.visibility = 'hidden';
              dupSection.style.display = 'none';

              var a1 = document.createElement('a');
              a1.href = '#';
              a1.innerHTML = '[hide]';
              a1.classList.add('clonehandle');
              a1.onclick = function() {
                  parent.style.visibility = 'hidden';
                  parent.style.display = 'none';
                  dupSection.style.visibility = 'visible';
                  dupSection.style.display = 'block';
                  return false;
              }.bind(parent, dupSection);
              node.appendChild(document.createTextNode(' '));
              node.appendChild(a1);

              var a2 = document.createElement('a');
              a2.href = '#';
              a2.innerHTML = '[show]';
              a2.classList.add('clonehandle');
              a2.onclick = function() {
                  parent.style.visibility = 'visible';
                  parent.style.display = 'block';
                  dupSection.style.visibility = 'hidden';
                  dupSection.style.display = 'none';
                  return false;
              }.bind(parent, dupSection);
              dupNode.appendChild(document.createTextNode(' '));
              dupNode.appendChild(a2);
          }
      }
  }
  domWalk(document.body, makeSectionCollapsable);

  document.getElementById('toc').innerHTML = toc;
}();
</script>
</body>
</html>
