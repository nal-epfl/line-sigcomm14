<!DOCTYPE html>
<html style="">
<head>
  <meta charset="UTF-8">
  <title>Network neutrality inference experiments</title>
  <link rel="shortcut icon" type="image/png" href="data:image/png;base64,
iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAN1wAADdcBQiibeAAAAAd0SU1FB94FAQ80AVPNu7YAAAIPSURBVDjL1ZM9aFNhFIbfc7+/2+Qm6fUnbYpIWogi1Qo6FBwUshhwFBwdG3B0im4uLh2cg5MgjhahIK5S7VJQbNUhrUWDiW2aNP/33tyfz0GqFDo46pnO9L485+EA//3QwTJ///EEi+RNQF8HcB6ABUCAoKHRJqAeQb8igy29fXh741DAlXtP7kLrB+OWaV29kMXQ9bHb7uPD9g5yU8dxbS6LVs/B8zefACAC8Ex7sYXVR7ccNrtQPm2OsZcApDsKUKk14QUBZiaPQUmO6Ukbm7UW1irf4fnhQekcM6Otb6+X3hvd6qZw+oOPADQAZNM2bsyfheAMW7UWVj9XETMF8hdncPnMFIgAJvh2JpdLAgAHgGa1PhsbT3YSdvLHl3ozWV5uZQ4YPT/AysZXENE+k2InlU5byfSJaSmV/zsAAHzHS/WiTkooBWFKCFOBSwkuJaRSEGPKFkrZQknQn9vD8IToH6VH61+4RAQQHeFPdwHAuHNJsrRlLBL08K/Ea0QicF6ca7xbAQCWz+ezp8ZG7Yxy18MgCBiF3DBIGASDDEaCoojrwJHhoBEbNtbsZuXpxO76Mty+WygUXB5FUTUeN0E08hNytOv7vZOeV7fDQWjpvuZEFHBuDIQQ+0KYDdMUO1KpulKqWiqVOofgyuVybG/PSfi+Ewe0GYYBY4yHSpHLGBumUqlusVgc/lvP9BNYu8h7Iyl+nAAAAABJRU5ErkJggg==">
  <style type="text/css">
  html {
          width:100%;
          height:100%;
          font-family: sans-serif;
          font-size: 14px;
          line-height: 1.4;
          color: #333;
          text-align: justify;
      }
      .page {
          margin-left: auto;
          margin-right: auto;
          max-width: 1000px;
      }
      div#toc {
          zdisplay: inline-block;
          padding: 0.5rem;
          border: 1px solid #59c;
          background-color: #fafcfe;
      }
      div#toc h2 {
          border: none;
          padding: 0;
          margin-top: 0;
      }
      div#toc > div > ul {
          list-style-type: none;
          padding-left: 0;
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
      }
      div#toc ul ul {
          list-style-type: none;
          padding-left: 1rem;
          margin-left: 0;
      }
      div#toc li {
          margin-top: 0.1rem;
          margin-bottom: 0.1rem;
      }
      a, a:visited {
          color: #249;
          text-decoration: none;
      }
      a:hover {
          text-decoration: underline;
      }
      a.clonehandle {
          color: #aaa;
          font-size: 1rem;
          text-decoration: none !important;
          font-weight: normal;
          float: right;
      }
      .clonehandle svg {
          fill: #aaa;
      }
      .svgicon {
          height: 1rem;
          width: 1.47rem;
          vertical-align: middle;
      }
      ul {
          list-style-type: disc;
      }
      li, li p {
          margin-top: 0.25rem;
          margin-bottom: 0.25rem;
      }
      .section {
          zmargin-top: 2rem;
      }
      h1, .h1 {
          color: #000;
          font-weight: normal;
          font-size: 2.0rem;
          margin-top: 1rem;
          padding-top: 0.5rem;
          border-bottom: 1px solid #777;
          margin-bottom: 1.5rem;
          padding-bottom: 0;
      }
      h2, .h2 {
          color: #000;
          font-weight: normal;
          font-size: 1.7rem;
          margin-top: 3rem;
          padding-top: 0;
          border-bottom: 1px solid #999;
          margin-bottom: 0.5rem;
          padding-bottom: 0;
      }
      h3, .h3 {
          color: #000;
          font-weight: normal;
          font-size: 1.4rem;
          margin-top: 2.5rem;
          border-bottom: 1px dashed #999;
          margin-bottom: 0.5rem;
      }
      h4, .h4 {
          color: #000;
          font-weight: normal;
          font-size: 1.2rem;
          margin-top: 2.0rem;
          margin-bottom: -0.5rem;
      }
      h5, .h5 {
          color: #000;
          font-weight: normal;
          font-size: 1.2rem;
          margin-top: 1rem;
          margin-bottom: -0.7rem;
      }
      h6, .h6 {
          color: #000;
          font-weight: normal;
          font-size: 1.2rem;
          margin-top: 1rem;
          margin-bottom: -0.7rem;
      }
      .h7 {
          color: #000;
          font-weight: normal;
          font-size: 1.2rem;
          margin-top: 1rem;
          margin-bottom: -0.7rem;
      }
      .h8 {
          color: #000;
          font-weight: normal;
          font-size: 1.2rem;
          margin-top: 1rem;
          margin-bottom: -0.7rem;
      }
      .h9 {
          color: #000;
          font-weight: normal;
          font-size: 1.2rem;
          margin-top: 1rem;
          margin-bottom: -0.7rem;
      }
      .h10 {
          color: #000;
          font-weight: normal;
          font-size: 1.2rem;
          margin-top: 1rem;
          margin-bottom: -0.7rem;
      }
      table, td, th {
          border: 1px solid black;
          border-collapse: collapse;
          text-align: left;
          padding: 0.35rem;
      }
      .vcenter {
          text-align: center;
      }
      .big {
          font-size: 1.3em;
      }
      pre, tt {
          border: 1px solid #bbb;
          background-color: #dadada;
          color: #000;
          font-family: monospace;
          font-size: 0.9rem;
      }
      pre {
          padding: 0.5rem;
          overflow-x: auto;
      }
      tt {
          padding: 0.1rem;
      }
      .ok {
          color: #4c4;
          fill: #4c4;
      }
      .warn {
          color: #b21;
          fill: #b21;
      }
      .todo {
          color: #fd0;
          fill: #fd0;
      }
      .err {
          color: #c44;
          fill: #c44;
      }
      ul, ol {
          padding-left: 0;
          margin-left: 0;
      }
      ul li {
          list-style-position: outside;
          margin-left: 1.1rem;
      }  
    	ol li {
          list-style-position: inside;
      }
  </style>
</head>
<body>
<div class="page">
<h1>Neutrality inference experiments</h1>
<div id="toc"></div>
<div class="section">
  <p>
  These are instructions for reproducing the results from the <a href="http://infoscience.epfl.ch/record/201580">SIGCOMM article</a>.
  You must follow these steps, which are described in the sections below:
  </p>
  <ol>
	<li>Download the code</li>
	<li>Prepare your hardware setup for the emulations</li>
	<li>Install the emulation software</li>
	<li>Run emulations using the network topologies and configurations used in the article</li>
	<li>Process the results and generate the plots</li>
  </ol>
  <p>
	We are also offering an archive with emulation results that reproduce the results <a href="sigcomm-experiments-repro-figure-data.tar.xz">here</a>.
  </p>
  <div class="section">
    <h2>Obtaining the code</h2>
    <p>Checkout the repository containing the setup used in our article:<pre>git clone https://git.epfl.ch/repo/line-sigcomm14.git</pre></p>
  </div>
  <div class="section">
    <h2>Preparing the hardware setup</h2>
    <p>
    The setup uses 3 machines:
    </p>
    <ul>
    <li>A machine used to configure the experiments and process the data (<em>Control center</em>)</li>
    <li>A machine used for traffic generation (<em>Traffic generator</em>)</li>
    <li>A machine used for emulating the network (<em>Network emulator</em>)</li>
    </ul>

    <p>
    The control center computer must satisfy a single requirement: it must run Ubuntu 12.04 LTS 64-bits.
    </p>
    <p>
    The hardware requirements for the traffic generator and the network emulator are described in section Architecture
    of <a href="line.html#architecture-2">this document</a>.
    </p>
  </div>
  <div class="section">
    <h2>Installing the software</h2>
    <p>
    Please follow the instructions from section System configuration of <a href="line.html#system-configuration-12">this document</a>.
    </p>
    <p>
    Additionally, to generate the plots on the control center you must install the matplotlib library:
    <pre>apt-get install matplotlib</pre>
    </p>
  </div>
  <div class="section">
    <h2>Running the experiments</h2>
    <p>
    In general, to run an emulation the following steps must be followed:
    </p>
    <ul>
    <li>Start the line-gui application on the control center machine</li>
    <li>Open a network topology or create a new one</li>
    <li>Configure link properties (rate, delay, policing/shaping)</li>
    <li>Configure the type of traffic that will be created by the traffic generator (e.g. how many TCP flows and between which hosts, transfer sizes, when flows are started etc.)</li>
    <li>Configure measurement parameters: sampling period, experiment duration</li>
    <li>Start the experiment</li>
    </ul>
    <p>
    For the article, we used 23 experiments. Configuring them by hand in the GUI is possible but time-consuming
    and error-prone. To simplify the process, we added to the interface a set of buttons that automate the process,
    simulating the actions of the user to generate exactly the configurations used in the paper. They can be seen in
    this <a href="config-buttons.png" target="_blank">screenshot</a>. The parameter values set by the buttons are described
    in detail for each figure below. Additionally, you can also find the complete configuration of the topology and
    the traffic used in each experiment in a file named graph.txt placed in the experiment directory (the traffic
    generator syntax is documented in line-traffic/config-file-howto.txt in the repository); other parameters
    passed to the emulator are saved in a file named run-params.txt. You can find these files in the archive we provide
    with our experimental data.
    </p>
    <div class="section">
      <h3>Figure 7a</h3>
      <p>
      For generating this figure we run 4 experiments using the "quad" topology.
      </p>
      <p>
      The shared link is neutral. To make things difficult for our algorithm, we try to create network conditions that could
      be misinterpreted as non-neutrality.
      </p>
      <p>
      Traffic class 1 and class 2 have the same properties (such as RTT, TCP congestion control algorithm) except the flow transfer
      size: the flow transfer size of paths 1 and 2 is 1Mb, while that of paths 3 and 4 varies: 1Mb, 10Mb, 40Mb and 10Gb.
      </p>
      <p>
      The four experiments used for the figure can be configured using the button "Sigcomm 7a" from the "Custom controls"
      window. The function that generates the configuration is:
      <pre>line-gui/customcontrols_qos.cpp: void CustomControls::on_btnSigcomm7a_clicked()</pre>
      </p>
      <p>
      After clicking the button, there should be four experiments in the queue. Click main window > "Queue" > "Start all" to
      start the emulations.
      </p>
      <p>
      Here is a summary of the parameters set by the configuration code:
      </p>
      <ul>
      <li>
        <b>Topology:</b> quad
      </li>
      <li>
        <b>Potential bottleneck links:</b> link 1
      </li>
      <li>
        <b>Bottleneck rate:</b> 100 Mb/s
      </li>
      <li>
        <b>Non-neutral links:</b> none
      </li>
      <li>
        <b>Rate limiting:</b> none (all neutral links have a single drop-tail queue)
      </li>
      <li>
        <b>Rate limit, class 1:</b> N/A
      </li>
      <li>
        <b>Rate limit, class 2:</b> N/A
      </li>
      <li>
        <b>Emulation duration:</b> 600 s
      </li>
      <li>
        <b>Sampling period:</b> 50 ms
      </li>
      <li>
        <b>Measured traffic, class 1:</b> 70 x 1Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Measured traffic, class 2:</b>
        <ul>
          <li>Experiment 1: 70 x 1Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 2: 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 3: 20 x 40Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 4: 15 x 9999Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
        </ul>
      </li>
      <li>
        <b>Background traffic, class 1:</b> none
      </li>
      <li>
        <b>Background traffic, class 2:</b> none
      </li>
      <li>
        <b>TCP congestion control:</b> CUBIC
      </li>
      <li>
        <b>Path RTT:</b> 48 ms
      </li>
      </ul>
    </div>
    <div class="section">
      <h3>Figure 7b</h3>
      <p>
      For generating this figure we run 4 experiments using the "quad" topology.
      </p>
      <p>
      The shared link is neutral. To make things difficult for our algorithm, we try to create network conditions that could
      be misinterpreted as non-neutrality.
      </p>
      <p>
      Traffic class 1 and class 2 have the same properties (such as transfer size, TCP congestion control algorithm) except RTT: the RTT of
      paths 1 and 2 is 50ms, while that of paths 3 and 4 varies from 50ms to 200ms.
      </p>
      <p>
      The four experiments used for the figure can be configured using the button "Sigcomm 7b" from the "Custom controls"
      window. The function that generates the configuration is:
      <pre>line-gui/customcontrols_qos.cpp: void CustomControls::on_btnSigcomm7b_clicked()</pre>
      </p>
      <p>
      After clicking the button, there should be four experiments in the queue. Click main window > "Queue" > "Start all" to
      start the emulations.
      </p>
      <p>
      Here is a summary of the parameters set by the configuration code:
      </p>
      <ul>
      <li>
        <b>Topology:</b> quad
      </li>
      <li>
        <b>Potential bottleneck links:</b> link 1
      </li>
      <li>
        <b>Bottleneck rate:</b> 100 Mb/s
      </li>
      <li>
        <b>Non-neutral links:</b> none
      </li>
      <li>
        <b>Rate limiting:</b> none (all neutral links have a single drop-tail queue)
      </li>
      <li>
        <b>Rate limit, class 1:</b> N/A
      </li>
      <li>
        <b>Rate limit, class 2:</b> N/A
      </li>
      <li>
        <b>Emulation duration:</b> 600 s
      </li>
      <li>
        <b>Sampling period:</b> 50 ms
      </li>
      <li>
        <b>Measured traffic, class 1:</b> 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Measured traffic, class 2:</b> 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Background traffic, class 1:</b> none
      </li>
      <li>
        <b>Background traffic, class 2:</b> none
      </li>
      <li>
        <b>TCP congestion control:</b> CUBIC
      </li>
      <li>
        <b>Path RTT, class 1:</b> 48 ms
      </li>
      <li>
        <b>Path RTT, class 2:</b>
        <ul>
          <li>Experiment 1: 48 ms</li>
          <li>Experiment 2: 80 ms</li>
          <li>Experiment 3: 120 ms</li>
          <li>Experiment 4: 200 ms </li>
        </ul>
      </li>
      </ul>
    </div>
    <div class="section">
      <h3>Figure 7c</h3>
      <p>
      For generating this figure we run 2 experiments using the "quad" topology.
      </p>
      <p>
      The shared link is neutral. To make things difficult for our algorithm, we try to create network conditions that could
      be misinterpreted as non-neutrality.
      </p>
      <p>
      Traffic class 1 and class 2 have the same properties (such as RTT, transfer size) except the TCP congestion
      control algorithms: in one experiment all paths use TCP CUBIC, while in the other paths 1 and 2 use CUBIC and paths
      3 and 4 use NewReno.
      </p>
      <p>
      The two experiments used for the figure can be configured using the button "Sigcomm 7c" from the "Custom controls"
      window. The function that generates the configuration is:
      <pre>line-gui/customcontrols_qos.cpp: void CustomControls::on_btnSigcomm7c_clicked()</pre>
      </p>
      <p>
      After clicking the button, there should be two experiments in the queue. Click main window > "Queue" > "Start all" to
      start the emulations.
      </p>
      <p>
      Here is a summary of the parameters set by the configuration code:
      </p>
      <ul>
      <li>
        <b>Topology:</b> quad
      </li>
      <li>
        <b>Potential bottleneck links:</b> link 1
      </li>
      <li>
        <b>Bottleneck rate:</b> 100 Mb/s
      </li>
      <li>
        <b>Non-neutral links:</b> none
      </li>
      <li>
        <b>Rate limiting:</b> none (all neutral links have a single drop-tail queue)
      </li>
      <li>
        <b>Rate limit, class 1:</b> N/A
      </li>
      <li>
        <b>Rate limit, class 2:</b> N/A
      </li>
      <li>
        <b>Emulation duration:</b> 600 s
      </li>
      <li>
        <b>Sampling period:</b> 50 ms
      </li>
      <li>
        <b>Measured traffic, class 1:</b> 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Measured traffic, class 2:</b> 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Background traffic, class 1:</b> none
      </li>
      <li>
        <b>Background traffic, class 2:</b> none
      </li>
      <li>
        <b>TCP congestion control, class 1:</b> CUBIC
      </li>
      <li>
        <b>TCP congestion control, class 2:</b>
        <ul>
          <li>Experiment 1: CUBIC</li>
          <li>Experiment 2: NewReno</li>
        </ul>
      </li>
      <li>
        <b>Path RTT:</b> 48 ms
      </li>
      </ul>
    </div>
    <div class="section">
      <h3>Figure 7d</h3>
      <p>
      For generating this figure we run 4 experiments using the "quad" topology.
      </p>
      <p>
      The shared link is non-neutral, policing the traffic in class 2. Here, the difficult scenarios for our algorithm are the
      ones where all the paths carry the same kind of traffic. In this plot we vary the transfer size for both traffic classes
      between 1, 10, 40 and 10000 Mb.
      </p>
      <p>
      The four experiments used for the figure can be configured using the button "Sigcomm 7d" from the "Custom controls"
      window. The function that generates the configuration is:
      <pre>line-gui/customcontrols_qos.cpp: void CustomControls::on_btnSigcomm7d_clicked()</pre>
      </p>
      <p>
      After clicking the button, there should be four experiments in the queue. Click main window > "Queue" > "Start all" to
      start the emulations.
      </p>
      <p>
      Here is a summary of the parameters set by the configuration code:
      </p>
      <ul>
      <li>
        <b>Topology:</b> quad
      </li>
      <li>
        <b>Potential bottleneck links:</b> link 1
      </li>
      <li>
        <b>Bottleneck rate:</b> 100 Mb/s
      </li>
      <li>
        <b>Non-neutral links:</b> link 1
      </li>
      <li>
        <b>Rate limiting:</b> policing (neutral links have a single drop-tail queue; non-neutral links use policing with 2 traffic classes)
      </li>
      <li>
        <b>Rate limit, class 1:</b> 100% of link rate (i.e. no limiting)
      </li>
      <li>
        <b>Rate limit, class 2:</b> 30% of link rate
      </li>
      <li>
        <b>Emulation duration:</b> 600 s
      </li>
      <li>
        <b>Sampling period:</b> 50 ms
      </li>
      <li>
        <b>Measured traffic, class 1:</b>
        <ul>
          <li>Experiment 1: 70 x 1Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 2: 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 3: 20 x 40Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 4: 15 x 9999Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
        </ul>
      </li>
      <li>
        <b>Measured traffic, class 2:</b>
        <ul>
          <li>Experiment 1: 70 x 1Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 2: 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 3: 20 x 40Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
          <li>Experiment 4: 15 x 9999Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)</li>
        </ul>
      </li>
      <li>
        <b>Background traffic, class 1:</b> none
      </li>
      <li>
        <b>Background traffic, class 2:</b> none
      </li>
      <li>
        <b>TCP congestion control:</b> CUBIC
      </li>
      <li>
        <b>Path RTT:</b> 48 ms
      </li>
      </ul>
    </div>
    <div class="section">
      <h3>Figure 7e</h3>
      <p>
      For generating this figure we run 4 experiments using the "quad" topology.
      </p>
      <p>
      The shared link is non-neutral, policing the traffic in class 2. Here, the difficult scenarios for our algorithm are the
      ones where all the paths carry the same kind of traffic. In this plot we vary the RTT for both traffic classes, between
      50, 80, 120 and 200 ms.
      </p>
      <p>
      The four experiments used for the figure can be configured using the button "Sigcomm 7e" from the "Custom controls"
      window. The function that generates the configuration is:
      <pre>line-gui/customcontrols_qos.cpp: void CustomControls::on_btnSigcomm7e_clicked()</pre>
      </p>
      <p>
      After clicking the button, there should be four experiments in the queue. Click main window > "Queue" > "Start all" to
      start the emulations.
      </p>
      <p>
      Here is a summary of the parameters set by the configuration code:
      </p>
      <ul>
      <li>
        <b>Topology:</b> quad
      </li>
      <li>
        <b>Potential bottleneck links:</b> link 1
      </li>
      <li>
        <b>Bottleneck rate:</b> 100 Mb/s
      </li>
      <li>
        <b>Non-neutral links:</b> link 1
      </li>
      <li>
        <b>Rate limiting:</b> policing (neutral links have a single drop-tail queue; non-neutral links use policing with 2 traffic classes)
      </li>
      <li>
        <b>Rate limit, class 1:</b> 100% of link rate (i.e. no limiting)
      </li>
      <li>
        <b>Rate limit, class 2:</b> 30% of link rate
      </li>
      <li>
        <b>Emulation duration:</b> 600 s
      </li>
      <li>
        <b>Sampling period:</b> 50 ms
      </li>
      <li>
        <b>Measured traffic, class 1:</b> 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Measured traffic, class 2:</b> 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Background traffic, class 1:</b> none
      </li>
      <li>
        <b>Background traffic, class 2:</b> none
      </li>
      <li>
        <b>TCP congestion control:</b> CUBIC
      </li>
      <li>
        <b>Path RTT:</b>
        <ul>
          <li>Experiment 1: 48 ms</li>
          <li>Experiment 2: 80 ms</li>
          <li>Experiment 3: 120 ms</li>
          <li>Experiment 4: 200 ms</li>
        </ul>
      </li>
      </ul>
    </div>
    <div class="section">
      <h3>Figure 7f</h3>
      <p>
      For generating this figure we run 4 experiments using the "quad" topology.
      </p>
      <p>
      The shared link is non-neutral, policing the traffic in class 2. Here, the difficult scenarios for our algorithm are the
      ones where all the paths carry the same kind of traffic. In this plot we vary the policing weights of the shared link,
      between (1.0,0.2), (1.0,0.3), (1.0,0.4) and (1.0,0.5). The first number represents the fraction of the link rate
      allocated to class 1, the second number represents the fraction of the link rate allocated to class 2.
      </p>
      <p>
      The four experiments used for the figure can be configured using the button "Sigcomm 7f" from the "Custom controls"
      window. The function that generates the configuration is:
      <pre>line-gui/customcontrols_qos.cpp: void CustomControls::on_btnSigcomm7f_clicked()</pre>
      </p>
      <p>
      After clicking the button, there should be four experiments in the queue. Click main window > "Queue" > "Start all" to
      start the emulations.
      </p>
      <p>
      Here is a summary of the parameters set by the configuration code:
      </p>
      <ul>
      <li>
        <b>Topology:</b> quad
      </li>
      <li>
        <b>Potential bottleneck links:</b> link 1
      </li>
      <li>
        <b>Bottleneck rate:</b> 100 Mb/s
      </li>
      <li>
        <b>Non-neutral links:</b> link 1
      </li>
      <li>
        <b>Rate limiting:</b> policing (neutral links have a single drop-tail queue; non-neutral links use policing with 2 traffic classes)
      </li>
      <li>
        <b>Rate limit, class 1:</b> 100% of link rate (i.e. no limiting)
      </li>
      <li>
        <b>Rate limit, class 2:</b>
        <ul>
          <li>Experiment 1: 20% of link rate</li>
          <li>Experiment 2: 30% of link rate</li>
          <li>Experiment 3: 40% of link rate</li>
          <li>Experiment 4: 50% of link rate</li>
        </ul>
      </li>
      <li>
        <b>Emulation duration:</b> 600 s
      </li>
      <li>
        <b>Sampling period:</b> 50 ms
      </li>
      <li>
        <b>Measured traffic, class 1:</b> 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Measured traffic, class 2:</b> 15 x 10Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Background traffic, class 1:</b> none
      </li>
      <li>
        <b>Background traffic, class 2:</b> none
      </li>
      <li>
        <b>TCP congestion control:</b> CUBIC
      </li>
      <li>
        <b>Path RTT:</b> 48 ms
      </li>
      </ul>
    </div>
    <div class="section">
      <h3>Figures 8a and 8b</h3>
      <p>
      For generating this figure we run an experiment using the "pegasus" topology. This is a large topology with 4 types of traffic (first number = transfer
      size, second number = number of parallel flows):
      </p>
      <ul>
      <li>class 1 measured: 1Mb x 1 + 10Mb x 1 + 40Mb x 1</li>
      <li>class 2 measured: 10000Mb x 1</li>
      <li>class 1 background: 1Mb x 4 + 10Mb x 2 + 40Mb x 1 + 10000Mb x 1</li>
      <li>class 2 background: 10000Mb x 1</li>
      </ul>
      <p>
      There are 3 non-neutral links, policing the traffic in class 2. There are two difficulties in this scenario:
      (1) that there is a large number of shared links and bottlenecks, but only a few of them are non-neutral;
      and (2) that measurements are taken for only some of the traffic (i.e. not every end-host in the network is a
      vantage point taking performance measurements).
      </p>
      <p>
      The experiment used for the figure can be configured using the button "Sigcomm 8a/b" from the "Custom controls"
      window. The function that generates the configuration is:
      <pre>line-gui/customcontrols_qos.cpp: void CustomControls::on_btnSigcomm8ab_clicked()</pre>
      </p>
      <p>
      After clicking the button, there should be two experiments in the queue. Click main window > "Queue" > "Start all" to
      start the emulations.
      </p>
      <p>
      Here is a summary of the parameters set by the configuration code:
      </p>
      <ul>
      <li>
        <b>Topology:</b> pegasus
      </li>
      <li>
        <b>Potential bottleneck links:</b> links 1-22
      </li>
      <li>
        <b>Bottleneck rate:</b> 100 Mb/s
      </li>
      <li>
        <b>Non-neutral links:</b> links 5, 14 and 20
      </li>
      <li>
        <b>Rate limiting:</b> policing (neutral links have a single drop-tail queue; non-neutral links use policing with 2 traffic classes)
      </li>
      <li>
        <b>Rate limit, class 1:</b> 100% of link rate (i.e. no limiting)
      </li>
      <li>
        <b>Rate limit, class 2:</b> 30% of link rate
      </li>
      <li>
        <b>Emulation duration:</b> 600 s
      </li>
      <li>
        <b>Sampling period:</b> 100 ms
      </li>
      <li>
        <b>Measured traffic, class 1:</b> 1 x 1Mb + 1 x 10Mb + 1 x 40Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Measured traffic, class 2:</b> 1 x 9999Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Background traffic, class 1:</b> 1 x 1Mb + 1 x 10Mb + 1 x 40Mb + 1 x 9999Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>Background traffic, class 2:</b> 1 x 9999Mb (Pareto scale = 2, Poisson rate = 0.1 flows/s, sequential)
      </li>
      <li>
        <b>TCP congestion control:</b> CUBIC
      </li>
      <li>
        <b>Path RTT:</b> between 80 and 120 ms, depending on path length
      </li>
      </ul>
    </div>
  </div>
  <div class="section">
    <h2>Processing the results and generating the plots</h2>
    <div class="section">
      <h3>Figure 7a</h3>
      <p>
      After running the experiments, open a terminal in a directory used to store the plot (e.g. repro-plots/7a).
      Copy the code from the text box in the "Custom controls" window to copy there the data from the emulations, then clear
      the text box in the "Custom controls" window.
      </p>
      <p>
      To generate the plot, run:
      <pre>../../plotting-scripts/plot-data.py --plot vary-transfer-size</pre>
      </p>
      <p>
      The script simply reads the file path-congestion-probs.txt from each experiment, selects the line corresponding to the
      desired loss threshold (0.001, i.e. the first column in the file) and plots the path congestion probabilities (columns
      2-5 in the file).
      </p>
      <p>
      The plot is found in:
      <pre>image-plot-7a-*/2. stats prob-cong-path - transferSize.png</pre>
      </p>
    </div>
    <div class="section">
      <h3>Figure 7b</h3>
      <p>
      After running the experiments, open a terminal in a directory used to store the plot (e.g. repro-plots/7b).
      Copy the code from the text box in the "Custom controls" window to copy there the data from the emulations, then clear
      the text box in the "Custom controls" window.
      </p>
      <p>
      To generate the plot, run:
      <pre>../../plotting-scripts/plot-data.py --plot vary-rtt</pre>
      </p>
      <p>
      The script simply reads the file path-congestion-probs.txt from each experiment, selects the line corresponding to the
      desired loss threshold (0.001, i.e. the first column in the file) and plots the path congestion probabilities (columns
      2-5 in the file).
      </p>
      <p>
      The plot is found in:
      <pre>image-plot-7b-*/9. stats prob-cong-path - rtt.png</pre>
      </p>
    </div>
    <div class="section">
      <h3>Figure 7c</h3>
      <p>
      After running the experiments, open a terminal in a directory used to store the plot (e.g. repro-plots/7c).
      Copy the code from the text box in the "Custom controls" window to copy there the data from the emulations, then clear
      the text box in the "Custom controls" window.
      </p>
      <p>
      Unfortunately the script incorrectly places the two experiments in different directories. Move them to the same
      directory (it does not matter which one).
      </p>
      <p>
      To generate the plot, run:
      <pre>../../plotting-scripts/plot-data.py --plot vary-tcp</pre>
      </p>
      <p>
      The script simply reads the file path-congestion-probs.txt from each experiment, selects the line corresponding to the
      desired loss threshold (0.001, i.e. the first column in the file) and plots the path congestion probabilities (columns
      2-5 in the file).
      </p>
      <p>
      The plot is found in:
      <pre>image-plot-7c-*/10. stats prob-cong-path - tcp.png</pre>
      </p>
    </div>
    <div class="section">
      <h3>Figure 7d</h3>
      <p>
      After running the experiments, open a terminal in a directory used to store the plot (e.g. repro-plots/7d).
      Copy the code from the text box in the "Custom controls" window to copy there the data from the emulations, then clear
      the text box in the "Custom controls" window.
      </p>
      <p>
      To generate the plot, run:
      <pre>../../plotting-scripts/plot-data.py --plot vary-transfer-size</pre>
      </p>
      <p>
      The script simply reads the file path-congestion-probs.txt from each experiment, selects the line corresponding to the
      desired loss threshold (0.001, i.e. the first column in the file) and plots the path congestion probabilities (columns
      2-5 in the file).
      </p>
      <p>
      The plot is found in:
      <pre>image-plot-7d-*/2. stats prob-cong-path - transferSize.png</pre>
      </p>
    </div>
    <div class="section">
      <h3>Figure 7e</h3>
      <p>
      After running the experiments, open a terminal in a directory used to store the plot (e.g. repro-plots/7e).
      Copy the code from the text box in the "Custom controls" window to copy there the data from the emulations, then clear
      the text box in the "Custom controls" window.
      </p>
      <p>
      To generate the plot, run:
      <pre>../../plotting-scripts/plot-data.py --plot vary-rtt</pre>
      </p>
      <p>
      The script simply reads the file path-congestion-probs.txt from each experiment, selects the line corresponding to the
      desired loss threshold (0.001, i.e. the first column in the file) and plots the path congestion probabilities (columns
      2-5 in the file).
      </p>
      <p>
      The plot is found in:
      <pre>image-plot-7e-*/9. stats prob-cong-path - rtt.png</pre>
      </p>
    </div>
    <div class="section">
      <h3>Figure 7f</h3>
      <p>
      After running the experiments, open a terminal in a directory used to store the plot (e.g. repro-plots/7f).
      Copy the code from the text box in the "Custom controls" window to copy there the data from the emulations, then clear
      the text box in the "Custom controls" window.
      </p>
      <p>
      To generate the plot, run:
      <pre>../../plotting-scripts/plot-data.py --plot vary-qos</pre>
      </p>
      <p>
      The script simply reads the file path-congestion-probs.txt from each experiment, selects the line corresponding to the
      desired loss threshold (0.001, i.e. the first column in the file) and plots the path congestion probabilities (columns
      2-5 in the file).
      </p>
      <p>
      The plot is found in:
      <pre>image-plot-7f-*/1. stats prob-cong-path - policing.png</pre>
      </p>
    </div>
    <div class="section">
      <h3>Figures 8a and 8b</h3>
      <p>
      After running the experiments, open a terminal in a directory used to store the plot (e.g. repro-plots; do not create
      a subdirectory for the figure).
      Copy the code from the text box in the "Custom controls" window to copy there the data from the emulations, then clear
      the text box in the "Custom controls" window.
      </p>
      <p>
      Note that there are two experiments; we are only interested in the experiment ending with "non-neutral-links-5-14-20".
      The other one contains an identical configuration except all links are neutral, but it was not included in the paper.
      </p>
      <p>
      Open a terminal to the directory of the the experiment ending with "non-neutral-links-5-14-20".
      To run the inference algorithm and generate the plot, run:
      <pre>../../../build-line-runner/line-runner --process-results $(pwd) numResamplings 3 lossThreshold 0.05</pre>
      </p>
      <p>
      The image file for figure 8a is located in:
      <pre>link-analysis-0.01/class-path-cong-probs-links.png</pre>
      </p>
      <p>
      The image file for figure 8b is located in:
      <pre>seq-analysis-*-lossth-0.05-*/link-seq-cong-prob-all-inferred.png</pre>
      </p>
    </div>
  </div>
</div>
<script>
// Replaces $todo etc with tickmarks
specialCharStuff = function() {
  var html = document.body.innerHTML;
  html = html.replace(new RegExp("\\$(tick|ok|done|yes)", "gi"), '<svg class="svgicon ok" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 216 146" enable-background="new 0 0 216 146" xml:space="preserve"> <path d="M168.861,37.966l-11.08-11.08c-1.52-1.521-3.368-2.281-5.54-2.281c-2.173,0-4.021,0.76-5.541,2.281L93.254,80.414 L69.301,56.379c-1.521-1.521-3.368-2.281-5.54-2.281c-2.173,0-4.02,0.76-5.541,2.281l-11.08,11.08 c-1.521,1.521-2.281,3.368-2.281,5.541c0,2.172,0.76,4.02,2.281,5.54l29.493,29.493l11.081,11.08c1.52,1.521,3.367,2.281,5.54,2.281 c2.172,0,4.019-0.761,5.54-2.281l11.081-11.08l58.986-58.986c1.52-1.521,2.281-3.368,2.281-5.541 C171.143,41.334,170.381,39.487,168.861,37.966z"/></svg>');
  html = html.replace(new RegExp("\\$(x|no|abort|aborted|fail|err)", "gi"), '<svg class="svgicon err" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 216 146" enable-background="new 0 0 216 146" xml:space="preserve"> <path d="M130.16,73l23.953-23.953c1.521-1.52,2.281-3.367,2.281-5.54c0-2.173-0.761-4.019-2.281-5.54l-11.08-11.081  c-1.521-1.521-3.367-2.281-5.539-2.281c-2.174,0-4.02,0.76-5.541,2.281L108,50.839L84.047,26.886  c-1.52-1.521-3.367-2.281-5.54-2.281c-2.172,0-4.019,0.76-5.54,2.281L61.886,37.967c-1.52,1.52-2.281,3.367-2.281,5.54  c0,2.173,0.76,4.019,2.281,5.54L85.839,73L61.886,96.953c-1.52,1.521-2.281,3.367-2.281,5.54s0.76,4.019,2.281,5.54l11.081,11.08  c1.521,1.521,3.368,2.281,5.54,2.281c2.173,0,4.019-0.761,5.54-2.281L108,95.16l23.954,23.953c1.521,1.521,3.366,2.281,5.541,2.281  c2.172,0,4.019-0.761,5.539-2.281l11.079-11.08c1.521-1.52,2.281-3.367,2.281-5.54s-0.76-4.019-2.281-5.54L130.16,73z"/> </svg>');
  html = html.replace(new RegExp("\\$(!|warn|warning)", "gi"), '<svg class="svgicon warn" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 216 146" enable-background="new 0 0 216 146" xml:space="preserve"> <path d="M179.695,125.388L117.126,10.673c-0.924-1.684-2.2-3.015-3.832-3.992c-1.628-0.978-3.394-1.467-5.295-1.467  c-1.901,0-3.667,0.49-5.296,1.467s-2.906,2.308-3.829,3.992L36.303,125.388c-1.901,3.423-1.847,6.845,0.163,10.267  c0.924,1.574,2.187,2.824,3.789,3.746c1.603,0.924,3.327,1.387,5.174,1.387H170.57c1.849,0,3.572-0.463,5.175-1.387  c1.603-0.922,2.864-2.172,3.789-3.746C181.544,132.232,181.598,128.811,179.695,125.388z M118.43,117.24  c0,0.76-0.259,1.398-0.773,1.914c-0.516,0.516-1.127,0.773-1.834,0.773H100.18c-0.706,0-1.317-0.257-1.833-0.773  c-0.516-0.517-0.774-1.154-0.774-1.914v-15.48c0-0.76,0.258-1.397,0.774-1.914c0.516-0.516,1.126-0.773,1.833-0.773h15.642  c0.707,0,1.318,0.257,1.834,0.773c0.515,0.517,0.773,1.154,0.773,1.914V117.24z M118.268,86.77  c-0.056,0.543-0.341,0.991-0.856,1.344c-0.517,0.354-1.154,0.529-1.915,0.529h-15.073c-0.76,0-1.412-0.176-1.955-0.529  c-0.544-0.354-0.815-0.801-0.815-1.346l-1.385-37.231c0-0.761,0.272-1.331,0.815-1.711c0.706-0.597,1.358-0.896,1.956-0.896h17.924  c0.598,0,1.25,0.298,1.956,0.896c0.543,0.38,0.813,0.896,0.813,1.548L118.268,86.77z"/></svg>');
  html = html.replace(new RegExp("\\$(todo)", "gi"), '<svg class="svgicon todo" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 216 146" enable-background="new 0 0 216 146" xml:space="preserve"> <g>  <path d="M74.107,100.374c-3.26,0-6.03,1.14-8.311,3.422c-2.281,2.282-3.422,5.052-3.422,8.312s1.14,6.029,3.422,8.312    c2.282,2.281,5.052,3.422,8.311,3.422c3.205,0,5.961-1.141,8.27-3.422c2.308-2.28,3.462-5.052,3.462-8.312    s-1.154-6.028-3.462-8.312C80.068,101.516,77.312,100.374,74.107,100.374z"/>  <path d="M71.5,75.607c0-3.585-1.276-6.653-3.829-9.208c-2.553-2.553-5.622-3.829-9.207-3.829s-6.654,1.276-9.207,3.829    c-2.553,2.553-3.829,5.622-3.829,9.208c0,3.584,1.276,6.651,3.829,9.205c2.553,2.554,5.622,3.83,9.207,3.83s6.654-1.276,9.207-3.83    C70.224,82.26,71.5,79.191,71.5,75.607z"/>  <path d="M147.107,45.626c1.791,0,3.328-0.639,4.603-1.915c1.276-1.277,1.915-2.812,1.915-4.604c0-1.793-0.639-3.327-1.915-4.603    c-1.276-1.277-2.812-1.915-4.603-1.915c-1.793,0-3.328,0.639-4.604,1.915s-1.915,2.81-1.915,4.603s0.639,3.327,1.915,4.604    S145.314,45.626,147.107,45.626z"/>  <path d="M74.108,24.768c-3.966,0-7.347,1.399-10.144,4.196c-2.798,2.797-4.196,6.178-4.196,10.143    c0,3.966,1.398,7.346,4.196,10.144c2.798,2.798,6.179,4.196,10.144,4.196c3.965,0,7.346-1.399,10.143-4.196    c2.797-2.798,4.196-6.179,4.196-10.144s-1.399-7.346-4.196-10.143S78.073,24.768,74.108,24.768z"/>  <path d="M168.29,70.066c-1.521-1.521-3.367-2.281-5.54-2.281s-4.02,0.76-5.54,2.281s-2.28,3.368-2.28,5.542    c0,2.172,0.76,4.021,2.28,5.539c1.521,1.521,3.367,2.281,5.54,2.281s4.02-0.76,5.54-2.281c1.521-1.52,2.28-3.367,2.28-5.539    C170.57,73.435,169.812,71.588,168.29,70.066z"/>  <path d="M147.107,102.982c-2.5,0-4.646,0.896-6.438,2.688s-2.688,3.938-2.688,6.438c0,2.498,0.896,4.645,2.688,6.437    c1.793,1.793,3.938,2.688,6.438,2.688c2.498,0,4.644-0.896,6.437-2.688c1.792-1.792,2.688-3.938,2.688-6.437    c0-2.5-0.896-4.645-2.688-6.438C151.751,103.878,149.605,102.982,147.107,102.982z"/>  <path d="M110.607,117.32c-2.879,0-5.337,1.02-7.375,3.057c-2.036,2.037-3.055,4.494-3.055,7.373s1.018,5.336,3.055,7.373    c2.038,2.037,4.495,3.057,7.375,3.057c2.879,0,5.336-1.02,7.373-3.057s3.056-4.494,3.056-7.373s-1.019-5.336-3.056-7.373    S113.486,117.32,110.607,117.32z"/>  <path d="M110.607,7.821c-4.345,0-8.04,1.52-11.082,4.562c-3.041,3.042-4.562,6.736-4.562,11.081c0,4.345,1.52,8.038,4.562,11.08    c3.042,3.041,6.736,4.562,11.082,4.562c4.347,0,8.039-1.52,11.08-4.562c3.041-3.041,4.562-6.735,4.562-11.08    c0-4.345-1.521-8.038-4.562-11.081C118.646,9.342,114.954,7.821,110.607,7.821z"/> </g> </svg>');
  html = html.replace(new RegExp("\\$(git:)([0-9a-fA-F]*)", "gi"),
                      "<a href='https://git.epfl.ch/polyrepo/private/changes.go?repositoryId=4260&amp;commitId=$2'>$2</a>");
  document.body.innerHTML = html;
}();

// Creates the table of contents
tocStuff = function() {
  var toc = "<div class='section'><h2 class='collapsed'>Table of contents</h2><ul>";
  var toclevel = 1;
  var tocUid = 0;

  function tocIdFromText(text) {
      var maxLength = 30;
      text = text.replace(/\s+/g, '-').replace(/[^0-9a-zA-Z-]/g, '').toLowerCase();
      text = text.substring(0, maxLength);
      tocUid += 1;
      text += '-' + tocUid;
      return text;
  }

  function makeTableOfContentsCallback(node) {
      if (!node.tagName)
          return;
      var level = 0;
      if (node.tagName.toLowerCase() === "h1" || ("classList" in node && node.classList.contains("h1"))) {
          level = 1;
      } else if (node.tagName.toLowerCase() === "h2" || ("classList" in node && node.classList.contains("h2"))) {
          level = 2;
      } else if (node.tagName.toLowerCase() === "h3" || ("classList" in node && node.classList.contains("h3"))) {
          level = 3;
      } else if (node.tagName.toLowerCase() === "h4" || ("classList" in node && node.classList.contains("h4"))) {
          level = 4;
      } else if (node.tagName.toLowerCase() === "h5" || ("classList" in node && node.classList.contains("h5"))) {
          level = 5;
      } else if (node.tagName.toLowerCase() === "h6" || ("classList" in node && node.classList.contains("h6"))) {
          level = 6;
      } else if ("classList" in node && node.classList.contains("h7")) {
          level = 7;
      } else if ("classList" in node && node.classList.contains("h8")) {
          level = 8;
      } else if ("classList" in node && node.classList.contains("h9")) {
          level = 9;
      } else if ("classList" in node && node.classList.contains("h10")) {
          level = 10;
      }
      if (level > 0) {
          while (level > toclevel) {
              toc += "<ul>";
              toclevel += 1;
          }
          while (level < toclevel) {
              toc += "</ul>";
              toclevel -= 1;
          }
          var text = (typeof node.textContent) === 'string' ? node.textContent : node.innerText;
          var html = node.innerHTML;
          var linkId = tocIdFromText(text);
          toc += "<li><a href='#" + linkId + "'>" + html + "</a></li>";
          node.innerHTML += "<a name='" + linkId + "'></a>";
      }
  }

  function domWalk(node, callback) {
      callback(node);
      if (!node.childNodes)
          return;
      for (var i = 0; i < node.childNodes.length; i++) {
          domWalk(node.childNodes[i], callback);
      }
  }

  domWalk(document.body, makeTableOfContentsCallback);
  toc += "</ul></div>";
  document.getElementById('toc').innerHTML += toc;

  function insertAfter(sibling, newNode) {
      sibling.parentNode.insertBefore(newNode, sibling.nextSibling);
  }

  function makeSectionCollapsable(node) {
      if (!node.tagName)
          return;
      var level = 0;
      if (node.tagName.toLowerCase() === "h1" || ("classList" in node && node.classList.contains("h1"))) {
          level = 1;
      } else if (node.tagName.toLowerCase() === "h2" || ("classList" in node && node.classList.contains("h2"))) {
          level = 2;
      } else if (node.tagName.toLowerCase() === "h3" || ("classList" in node && node.classList.contains("h3"))) {
          level = 3;
      } else if (node.tagName.toLowerCase() === "h4" || ("classList" in node && node.classList.contains("h4"))) {
          level = 4;
      } else if (node.tagName.toLowerCase() === "h5" || ("classList" in node && node.classList.contains("h5"))) {
          level = 5;
      } else if (node.tagName.toLowerCase() === "h6" || ("classList" in node && node.classList.contains("h6"))) {
          level = 6;
      } else if ("classList" in node && node.classList.contains("h7")) {
          level = 7;
      } else if ("classList" in node && node.classList.contains("h8")) {
          level = 8;
      } else if ("classList" in node && node.classList.contains("h9")) {
          level = 9;
      } else if ("classList" in node && node.classList.contains("h10")) {
          level = 10;
      }
      if (level > 0) {
          var parent = node.parentNode;
          if (parent &&
              parent.parentNode &&
              parent.classList.contains("section") &&
              !node.classList.contains("clone")) {
              var dupSection = document.createElement('div');
              dupSection.classList.add('section');
              dupSection.classList.add('clone');
              var dupNode = node.cloneNode(true);
              dupNode.classList.add('clone');
              insertAfter(parent, dupSection);
              dupSection.appendChild(dupNode);

              dupSection.style.visibility = 'hidden';
              dupSection.style.display = 'none';

              var a1 = document.createElement('a');
              a1.href = '#';
              a1.innerHTML = '&nbsp;<svg class="svgicon" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 216 146" enable-background="new 0 0 216 146" xml:space="preserve"><path d="M163.076,59.639c-1.521-1.521-3.368-2.281-5.541-2.281H58.464c-2.172,0-4.019,0.76-5.54,2.281s-2.281,3.367-2.281,5.54 v15.644c0,2.173,0.76,4.019,2.281,5.539c1.521,1.521,3.368,2.281,5.54,2.281h99.071c2.173,0,4.02-0.76,5.541-2.281 c1.52-1.52,2.281-3.366,2.281-5.539V65.179C165.357,63.006,164.598,61.159,163.076,59.639z"/></svg>';
              a1.classList.add('clonehandle');
              a1.title = 'Collapse';
              a1.onclick = function() {
                  parent.style.visibility = 'hidden';
                  parent.style.display = 'none';
                  dupSection.style.visibility = 'visible';
                  dupSection.style.display = 'block';
                  return false;
              }.bind(parent, dupSection);
              node.appendChild(document.createTextNode(' '));
              node.appendChild(a1);

              var a2 = document.createElement('a');
              a2.href = '#';
              a2.innerHTML = '&nbsp;<svg class="svgicon" version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 216 146" enable-background="new 0 0 216 146" xml:space="preserve"> <path d="M163.076,59.639c-1.521-1.521-3.368-2.281-5.541-2.281h-33.893V23.464c0-2.172-0.761-4.019-2.281-5.54 c-1.521-1.52-3.367-2.281-5.541-2.281h-15.642c-2.172,0-4.019,0.76-5.54,2.281s-2.281,3.368-2.281,5.54v33.894H58.464 c-2.172,0-4.019,0.76-5.54,2.281s-2.281,3.367-2.281,5.54v15.644c0,2.173,0.76,4.019,2.281,5.539 c1.521,1.521,3.368,2.281,5.54,2.281h33.893v33.895c0,2.172,0.76,4.02,2.281,5.54s3.368,2.28,5.54,2.28h15.643 c2.174,0,4.02-0.76,5.541-2.28c1.521-1.521,2.281-3.368,2.281-5.54V88.643h33.893c2.173,0,4.02-0.76,5.541-2.281 c1.52-1.52,2.281-3.366,2.281-5.539V65.179C165.357,63.006,164.598,61.159,163.076,59.639z"/></svg>';
              a2.title = 'Expand';
              a2.classList.add('clonehandle');
              a2.onclick = function() {
                  parent.style.visibility = 'visible';
                  parent.style.display = 'block';
                  dupSection.style.visibility = 'hidden';
                  dupSection.style.display = 'none';
                  return false;
              }.bind(parent, dupSection);
              dupNode.appendChild(document.createTextNode(' '));
              dupNode.appendChild(a2);

              if (node.classList.contains('collapsed')) {
                a1.click();
              }
          }
      }
  }
  domWalk(document.body, makeSectionCollapsable);
}();
</script>
</div>
</body>
</html>
